function draw(t,e,o){socket.emit("draw",lastX,lastY,t,e,o,color),lastX=t,lastY=e}var can=document.getElementById("whiteboard"),context=can.getContext("2d"),socket=io(),paint=!1,lastX,lastY,color="#000000";$("#whiteboard").mousedown(function(t){var e=t.pageX-$(this).offset().left,o=t.pageY-$(this).offset().top;paint=!0,draw(e,o,!1)}),$("#whiteboard").mousemove(function(t){paint&&draw(t.pageX-$(this).offset().left,t.pageY-$(this).offset().top,!0)}),$("#whiteboard").mouseup(function(t){paint=!1}),$("#whiteboard").mouseleave(function(t){paint=!1}),can.addEventListener("touchstart",function(t){t.preventDefault(),paint=!0,draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!1)},!1),can.addEventListener("touchmove",function(t){t.preventDefault(),paint&&draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!0)},!0),can.addEventListener("touchend",function(t){t.preventDefault(),paint=!1},!1),can.addEventListener("touchcancel",function(t){paint=!1}),socket.on("remoteDraw",function(t,e,o,n,a,i){a&&(context.beginPath(),context.strokeStyle=i,context.lineJoin="round",context.lineWidth=10,context.moveTo(t,e),context.lineTo(o,n),context.closePath(),context.stroke())});