function draw(t,e,n){socket.emit("draw",lastX,lastY,t,e,n),lastX=t,lastY=e}var can=document.getElementById("whiteboard"),context=can.getContext("2d"),socket=io(),paint=!1,lastX,lastY;$("#whiteboard").mousedown(function(t){var e=t.pageX-$(this).offset().left,n=t.pageY-$(this).offset().top;paint=!0,draw(e,n,!1)}),$("#whiteboard").mousemove(function(t){paint&&draw(t.pageX-$(this).offset().left,t.pageY-$(this).offset().top,!0)}),$("#whiteboard").mouseup(function(t){paint=!1}),$("#whiteboard").mouseleave(function(t){paint=!1}),can.addEventListener("touchstart",function(t){t.preventDefault(),paint=!0,draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!1)},!1),can.addEventListener("touchmove",function(t){t.preventDefault(),paint&&draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!0)},!0),can.addEventListener("touchend",function(t){t.preventDefault(),paint=!1},!1),can.addEventListener("touchcancel",function(t){paint=!1}),socket.on("remoteDraw",function(t,e,n,o,a){a&&(context.beginPath(),context.strokeStyle="#ff0000",context.lineJoin="round",context.lineWidth=10,context.moveTo(t,e),context.lineTo(n,o),context.closePath(),context.stroke())});